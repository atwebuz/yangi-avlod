"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}window.reinit||(window.reinit={}),window.reinit.ajax=function(){$("[data-ajax]:not(.loaded)").each(function(t,e){new Ajax(e)})};var Ajax=function(){function e(t){_classCallCheck(this,e),this.$el=$(t),this.id=Math.floor(Math.random()*Math.floor(999999999999)),this.src=this.$el.attr("data-ajax-src"),this.event=this.$el.attr("data-ajax-event").split(","),this.target=this.$el.attr("data-ajax-target"),this.$target=$(this.target),this.reinit=this.$el.attr("data-ajax-reinit").split(","),this.event_add()}return _createClass(e,[{key:"loading",value:function(){var t=this;this.preloader_add(),this.$target.load(this.src,function(){t.reinit_plugin(),t.preloader_remove()}),this.event_remove()}},{key:"event_add",value:function(){var a=this;$.each(this.event,function(t,e){$(document).on(e+"."+a.id,'[data-ajax-target="'+a.target+'"]',a.loading.bind(a))})}},{key:"event_remove",value:function(){var a=this;$.each(this.event,function(t,e){$(document).off(e+"."+a.id,'[data-ajax-target="'+a.target+'"]')})}},{key:"reinit_plugin",value:function(){$.each(this.reinit,function(t,e){var a,i=e.split(".");1<i.length?(a=window.reinit,$.each(i,function(t,e){a=a[e.trim()]}),a()):window.reinit[e]&&window.reinit[e]()})}},{key:"preloader_add",value:function(){this.$target.addClass("preloader-block"),this.$target.addClass("preloader-block--ajax")}},{key:"preloader_remove",value:function(){this.$target.removeClass("preloader-block"),this.$target.removeClass("preloader-block--ajax")}}]),e}();"loading"!=document.readyState?window.reinit.ajax():window.addEventListener("load",function(t){window.reinit.ajax()});